{"ast":null,"code":"import { defineComponent as e, toRaw as n, shallowRef as t, computed as r, ref as o, readonly as a, onMounted as i, watch as u, normalizeClass as c, onBeforeUnmount as l, h as s } from \"vue\";\nimport p from \"video.js\";\nfunction g(e, n) {\n  var t = {};\n  for (var r in e) Object.prototype.hasOwnProperty.call(e, r) && n.indexOf(r) < 0 && (t[r] = e[r]);\n  if (null != e && \"function\" == typeof Object.getOwnPropertySymbols) {\n    var o = 0;\n    for (r = Object.getOwnPropertySymbols(e); o < r.length; o++) n.indexOf(r[o]) < 0 && Object.prototype.propertyIsEnumerable.call(e, r[o]) && (t[r[o]] = e[r[o]]);\n  }\n  return t;\n}\nvar d = {\n    src: {\n      type: String,\n      onChange: function (e, n) {\n        return e.src(n);\n      }\n    },\n    width: {\n      type: Number,\n      onChange: function (e, n) {\n        return e.width(n);\n      },\n      onEvent: function (e, n) {\n        e.on([\"playerresize\", \"resize\"], function () {\n          return n(e.width());\n        });\n      }\n    },\n    height: {\n      type: Number,\n      onChange: function (e, n) {\n        return e.height(n);\n      },\n      onEvent: function (e, n) {\n        e.on([\"playerresize\", \"resize\"], function () {\n          return n(e.height());\n        });\n      }\n    },\n    preload: {\n      type: String,\n      onChange: function (e, n) {\n        return e.preload(n);\n      }\n    },\n    loop: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.loop(n);\n      }\n    },\n    muted: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.muted(n);\n      },\n      onEvent: function (e, n) {\n        return e.on(\"volumechange\", function () {\n          return n(e.muted());\n        });\n      }\n    },\n    poster: {\n      type: String,\n      onChange: function (e, n) {\n        return e.poster(n);\n      },\n      onEvent: function (e, n) {\n        return e.on(\"posterchange\", function () {\n          return n(e.poster());\n        });\n      }\n    },\n    controls: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.controls(n);\n      },\n      onEvent: function (e, n) {\n        e.on(\"controlsenabled\", function () {\n          return n(!0);\n        }), e.on(\"controlsdisabled\", function () {\n          return n(!1);\n        });\n      }\n    },\n    autoplay: {\n      type: [Boolean, String],\n      onChange: function (e, n) {\n        return e.autoplay(n);\n      }\n    },\n    crossorigin: {\n      type: String,\n      onChange: function (e, n) {\n        return e.crossOrigin(n);\n      }\n    },\n    crossOrigin: {\n      type: String,\n      onChange: function (e, n) {\n        return e.crossOrigin(n);\n      }\n    },\n    playsinline: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.playsinline(n);\n      }\n    },\n    playsInline: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.playsinline(n);\n      }\n    }\n  },\n  f = {\n    id: {\n      type: String\n    },\n    sources: {\n      type: Array,\n      onChange: function (e, n) {\n        return e.src(n);\n      }\n    },\n    tracks: {\n      type: Array,\n      onChange: function (e, n) {\n        for (var t = e.remoteTextTracks(), r = (null == t ? void 0 : t.length) || 0; r--;) e.removeRemoteTextTrack(t[r]);\n        e.ready(function () {\n          n.forEach(function (n) {\n            return e.addRemoteTextTrack(n, !1);\n          });\n        });\n      }\n    },\n    textTrackSettings: {\n      type: Object,\n      onChange: function (e, n) {\n        return e.textTrackSettings.options(n);\n      }\n    },\n    language: {\n      type: String,\n      onChange: function (e, n) {\n        return e.language(n);\n      },\n      onEvent: function (e, n) {\n        return e.on(\"languagechange\", function () {\n          return n(e.language());\n        });\n      }\n    },\n    languages: {\n      type: Object\n    },\n    playbackRates: {\n      type: Array,\n      onChange: function (e, n) {\n        return e.playbackRates(null != n ? n : []);\n      },\n      onEvent: function (e, n) {\n        e.on(\"playbackrateschange\", function () {\n          return n(e.playbackRates());\n        });\n      }\n    },\n    audioOnlyMode: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.audioOnlyMode(n);\n      }\n    },\n    audioPosterMode: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.audioPosterMode(n);\n      }\n    },\n    responsive: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.responsive(n);\n      }\n    },\n    breakpoints: {\n      type: Object,\n      onChange: function (e, n) {\n        return e.breakpoints(n);\n      }\n    },\n    fluid: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.fluid(n);\n      }\n    },\n    fill: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.fill(n);\n      }\n    },\n    aspectRatio: {\n      type: String,\n      onChange: function (e, n) {\n        return e.aspectRatio(n);\n      }\n    },\n    fullscreen: {\n      type: Object\n    },\n    liveui: {\n      type: Boolean\n    },\n    liveTracker: {\n      type: Object\n    },\n    disablePictureInPicture: {\n      type: Boolean,\n      onChange: function (e, n) {\n        return e.disablePictureInPicture(n);\n      }\n    },\n    notSupportedMessage: {\n      type: String\n    },\n    normalizeAutoplay: {\n      type: Boolean\n    },\n    noUITitleAttributes: {\n      type: Boolean\n    },\n    preferFullWindow: {\n      type: Boolean\n    },\n    suppressNotSupportedError: {\n      type: Boolean\n    },\n    techCanOverridePoster: {\n      type: Boolean\n    },\n    reportTouchActivity: {\n      type: Boolean\n    },\n    techOrder: {\n      type: Array\n    },\n    inactivityTimeout: {\n      type: Number\n    },\n    userActions: {\n      type: Object\n    },\n    plugins: {\n      type: Object\n    },\n    restoreEl: {\n      type: [Boolean, Object]\n    },\n    \"vtt.js\": {\n      type: String\n    }\n  },\n  v = {\n    children: {\n      type: [Array, Object]\n    },\n    controlBar: {\n      type: Object,\n      onChange: function (e, n) {\n        return e.controlBar.options(n);\n      }\n    }\n  },\n  y = {\n    html5: {\n      type: Object\n    }\n  },\n  h = {\n    volume: {\n      type: Number,\n      onChange: function (e, n) {\n        return e.volume(n);\n      },\n      onEvent: function (e, n) {\n        return e.on(\"volumechange\", function () {\n          return n(e.volume());\n        });\n      }\n    },\n    playbackRate: {\n      type: Number,\n      onChange: function (e, n) {\n        e.playbackRate(n), e.defaultPlaybackRate(n);\n      },\n      onEvent: function (e, n) {\n        e.on(\"ratechange\", function () {\n          n(e.playbackRate());\n        });\n      }\n    },\n    options: {\n      type: Object\n    }\n  },\n  b = Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, d), f), v), y), h),\n  m = Object.keys(b),\n  O = Object.assign(Object.assign(Object.assign(Object.assign({}, {\n    loadstart: \"onLoadStart\",\n    suspend: \"onSuspend\",\n    abort: \"onAbort\",\n    error: \"onError\",\n    emptied: \"onEmptied\",\n    stalled: \"onStalled\",\n    loadedmetadata: \"onLoadedMetadata\",\n    loadeddata: \"onLoadedData\",\n    canplay: \"onCanPlay\",\n    canplaythrough: \"onCanPlayThrough\",\n    playing: \"onPlaying\",\n    waiting: \"onWaiting\",\n    seeking: \"onSeeking\",\n    seeked: \"onSeeked\",\n    ended: \"onEnded\",\n    durationchange: \"onDurationChange\",\n    timeupdate: \"onTimeUpdate\",\n    progress: \"onProgress\",\n    play: \"onPlay\",\n    pause: \"onpause\",\n    ratechange: \"onRateChange\",\n    resize: \"onResize\",\n    volumechange: \"onVolumeChange\"\n  }), {\n    posterchange: \"onPosterChange\",\n    languagechange: \"onLanguageChange\",\n    fullscreenchange: \"onFullscreenChange\",\n    playbackrateschange: \"onPlaybackRatesChange\",\n    controlsdisabled: \"onControlsDisabled\",\n    controlsenabled: \"onControlsEnabled\",\n    enterFullWindow: \"onEnterFullWindow\",\n    exitFullWindow: \"onExitFullWindow\",\n    enterpictureinpicture: \"onEnterPictureInPicture\",\n    leavepictureinpicture: \"onLeavePictureInPicture\",\n    sourceset: \"onSourceSet\",\n    texttrackchange: \"onTextTrackChange\",\n    textdata: \"onTextData\",\n    useractive: \"onUserActive\",\n    userinactive: \"onUserInactive\",\n    usingcustomcontrols: \"onUsingCustomControls\",\n    usingnativecontrols: \"onUsingNativeControls\",\n    dispose: \"onDispose\"\n  }), {\n    beforepluginsetup: \"onBeforePluginSetup\",\n    pluginsetup: \"onPluginSetup\"\n  }), {\n    componentresize: \"onComponentResize\",\n    playerresize: \"onPlayerResize\",\n    ready: \"onReady\",\n    tap: \"onTap\"\n  }),\n  k = Object.keys(O);\nObject.values(O);\nvar C = function (e) {\n    var n,\n      t = null == e ? void 0 : e.trim().replace(/\\s+/g, \" \");\n    return t && null !== (n = t.split(\" \")) && void 0 !== n ? n : [];\n  },\n  j = {\n    src: {\n      getter: function (e) {\n        return e.src();\n      }\n    },\n    currentSrc: {\n      getter: function (e) {\n        return e.currentSrc();\n      }\n    },\n    currentSource: {\n      getter: function (e) {\n        return e.currentSource();\n      }\n    },\n    width: {\n      events: [\"resize\", \"playerresize\"],\n      getter: function (e) {\n        return e.width();\n      }\n    },\n    height: {\n      events: [\"resize\", \"playerresize\"],\n      getter: function (e) {\n        return e.height();\n      }\n    },\n    currentWidth: {\n      events: [\"resize\", \"playerresize\"],\n      getter: function (e) {\n        return e.currentWidth();\n      }\n    },\n    currentHeight: {\n      events: [\"resize\", \"playerresize\"],\n      getter: function (e) {\n        return e.currentHeight();\n      }\n    },\n    videoWidth: {\n      events: [\"resize\", \"playerresize\"],\n      getter: function (e) {\n        return e.videoWidth();\n      }\n    },\n    videoHeight: {\n      events: [\"resize\", \"playerresize\"],\n      getter: function (e) {\n        return e.videoHeight();\n      }\n    },\n    controls: {\n      events: [\"controlsdisabled\", \"controlsenabled\"],\n      getter: function (e) {\n        return e.controls();\n      }\n    },\n    volume: {\n      events: [\"volumechange\"],\n      getter: function (e) {\n        return e.volume();\n      }\n    },\n    muted: {\n      events: [\"volumechange\"],\n      getter: function (e) {\n        return e.muted();\n      }\n    },\n    poster: {\n      events: [\"posterchange\"],\n      getter: function (e) {\n        return e.poster();\n      }\n    },\n    seeking: {\n      events: [\"seeking\"],\n      getter: function (e) {\n        return e.seeking();\n      }\n    },\n    paused: {\n      events: [\"pause\", \"play\", \"playing\"],\n      getter: function (e) {\n        return e.paused();\n      }\n    },\n    ended: {\n      events: [\"ended\", \"play\"],\n      getter: function (e) {\n        return e.ended();\n      }\n    },\n    currentTime: {\n      events: [\"timeupdate\"],\n      getter: function (e) {\n        return e.currentTime();\n      }\n    },\n    duration: {\n      events: [\"durationchange\"],\n      getter: function (e) {\n        return e.duration();\n      }\n    },\n    playbackRate: {\n      events: [\"ratechange\"],\n      getter: function (e) {\n        return e.playbackRate();\n      }\n    },\n    playbackRates: {\n      events: [\"playbackrateschange\"],\n      getter: function (e) {\n        return e.playbackRates();\n      }\n    },\n    isFullscreen: {\n      events: [\"fullscreenchange\"],\n      getter: function (e) {\n        return e.isFullscreen();\n      }\n    },\n    isInPictureInPicture: {\n      events: [\"enterpictureinpicture\", \"leavepictureinpicture\"],\n      getter: function (e) {\n        return e.isInPictureInPicture();\n      }\n    },\n    isLive: {\n      getter: function (e) {\n        var n;\n        return null === (n = e.liveTracker) || void 0 === n ? void 0 : n.isLive();\n      }\n    },\n    language: {\n      events: [\"languagechange\"],\n      getter: function (e) {\n        return e.language();\n      }\n    },\n    userActive: {\n      events: [\"useractive\", \"userinactive\"],\n      getter: function (e) {\n        return e.userActive();\n      }\n    },\n    readyState: {\n      events: [\"loadeddata\"],\n      getter: function (e) {\n        return e.readyState();\n      }\n    },\n    networkState: {\n      events: [\"loadeddata\", \"error\"],\n      getter: function (e) {\n        return e.networkState();\n      }\n    },\n    error: {\n      events: [\"loadeddata\", \"error\"],\n      getter: function (e) {\n        return e.error();\n      }\n    },\n    buffered: {\n      events: [\"progress\"],\n      getter: function (e) {\n        return e.buffered();\n      }\n    },\n    bufferedPercent: {\n      events: [\"progress\"],\n      getter: function (e) {\n        return e.bufferedPercent();\n      }\n    },\n    played: {\n      events: [\"timeupdate\"],\n      getter: function (e) {\n        return e.played();\n      }\n    },\n    seekable: {\n      events: [\"progress\", \"seeked\"],\n      getter: function (e) {\n        return e.seekable();\n      }\n    },\n    audioTracks: {\n      getter: function (e) {\n        var n;\n        return null === (n = e.audioTracks) || void 0 === n ? void 0 : n.call(e);\n      }\n    },\n    videoTracks: {\n      getter: function (e) {\n        var n;\n        return null === (n = e.videoTracks) || void 0 === n ? void 0 : n.call(e);\n      }\n    },\n    textTracks: {\n      getter: function (e) {\n        var n;\n        return null === (n = e.textTracks) || void 0 === n ? void 0 : n.call(e);\n      }\n    }\n  },\n  P = m.filter(function (e) {\n    return Boolean(b[e].onEvent);\n  }),\n  S = function (e) {\n    return \"update:\" + e;\n  },\n  E = k.concat(P.map(S)),\n  T = m.reduce(function (e, n) {\n    var t,\n      r = b[n],\n      o = Array.isArray(r.type) ? r.type : [r.type],\n      a = Object.assign({}, r);\n    return o.includes(Boolean) && (a.default = void 0), Object.assign(Object.assign({}, e), ((t = {})[n] = a, t));\n  }, {}),\n  B = e({\n    name: \"VueVideoPlayer\",\n    props: Object.assign(Object.assign({}, T), {\n      class: [String, Object, Array]\n    }),\n    emits: E.concat([\"mounted\"], [\"unmounted\"]),\n    setup: function (e, d) {\n      var f = n(e),\n        v = f.class,\n        y = g(f, [\"class\"]),\n        h = t(!1),\n        O = t(null),\n        E = t(null),\n        T = r(function () {\n          return E.value ? E.value.player : null;\n        }),\n        B = o(null),\n        R = r(function () {\n          return B.value ? a(B.value) : null;\n        });\n      return i(function () {\n        var n,\n          t = function (e) {\n            var n,\n              t = e.props,\n              r = e.element,\n              o = e.className,\n              a = e.onEvent,\n              i = t.options;\n            void 0 === i && (i = {});\n            var u = g(t, [\"options\"]),\n              c = {};\n            Object.keys(u).forEach(function (e) {\n              var n = u[e];\n              void 0 !== n && (c[e] = n);\n            });\n            var l = Object.assign(Object.assign({}, c), i),\n              s = l.volume,\n              d = l.playbackRate,\n              f = g(l, [\"volume\", \"playbackRate\"]),\n              v = Object.assign(Object.assign({}, f), {\n                playsinline: null !== (n = f.playsinline) && void 0 !== n ? n : f.playsInline\n              }),\n              y = p(r, v, function () {\n                var e = this;\n                k.forEach(function (n) {\n                  e.on(n, function (e) {\n                    a(n, e);\n                  });\n                }), f.src && !f.sources && this.src(f.src), s && Number.isFinite(s) && this.volume(s), d && Number.isFinite(d) && (this.defaultPlaybackRate(d), setTimeout(function () {\n                  e.playbackRate(d);\n                }, 0));\n              });\n            o && C(o).map(function (e) {\n              return y.addClass(e);\n            });\n            var h = function (e) {\n              var n;\n              null === (n = y.options) || void 0 === n || n.call(y, null != e ? e : {});\n            };\n            return {\n              player: y,\n              dispose: function () {\n                return y.dispose();\n              },\n              updateClassNames: function (e, n) {\n                C(e).map(function (e) {\n                  return y.removeClass(e);\n                }), C(n).map(function (e) {\n                  return y.addClass(e);\n                });\n              },\n              updateOptions: h,\n              updatePropOption: function (e, n) {\n                var t, r, o;\n                h(((t = {})[e] = n, t)), null === (o = null === (r = b[e]) || void 0 === r ? void 0 : r.onChange) || void 0 === o || o.call(r, y, n);\n              }\n            };\n          }({\n            element: O.value,\n            props: y,\n            onEvent: d.emit\n          });\n        n = {\n          player: t.player,\n          onEvent: d.emit\n        }, P.forEach(function (e) {\n          var t, r;\n          null === (r = null === (t = b[e]) || void 0 === t ? void 0 : t.onEvent) || void 0 === r || r.call(t, n.player, function (t) {\n            n.onEvent(S(e), t);\n          });\n        }), u(function () {\n          return e.class;\n        }, function (e, n) {\n          var r = c(n),\n            o = c(e);\n          t.updateClassNames(r, o);\n        }, {\n          immediate: !0\n        }), u(function () {\n          return e.options;\n        }, function (e) {\n          return t.updateOptions(null != e ? e : {});\n        }, {\n          deep: !0\n        }), m.filter(function (e) {\n          return \"options\" !== e;\n        }).forEach(function (n) {\n          u(function () {\n            return e[n];\n          }, function (e) {\n            return t.updatePropOption(n, e);\n          }, {\n            deep: !0\n          });\n        }), function (e, n) {\n          var t = Object.keys(j),\n            r = t.reduce(function (n, t) {\n              var r;\n              return Object.assign(Object.assign({}, n), ((r = {})[t] = j[t].getter(e), r));\n            }, {\n              playing: !1,\n              waiting: !1\n            }),\n            o = function (e, t) {\n              r[e] = t, n.onUpdate(e, t, Object.assign({}, r));\n            };\n          e.on([\"pause\", \"ended\"], function () {\n            o(\"playing\", !1);\n          }), e.on([\"play\", \"playing\"], function () {\n            o(\"playing\", !0);\n          }), e.on(\"waiting\", function () {\n            o(\"waiting\", !0);\n            var n = e.currentTime(),\n              t = function () {\n                n !== e.currentTime() && (o(\"waiting\", !1), e.off(\"timeupdate\", t));\n              };\n            e.on(\"timeupdate\", t);\n          }), t.forEach(function (n) {\n            var t,\n              r = j[n];\n            e.on([\"loadstart\", \"loadedmetadata\"].concat(null !== (t = r.events) && void 0 !== t ? t : []), function () {\n              o(n, r.getter(e));\n            });\n          }), n.onInit(Object.assign({}, r));\n        }(t.player, {\n          onInit: function (e) {\n            B.value = e;\n          },\n          onUpdate: function (e, n) {\n            B.value && (B.value[e] = n);\n          }\n        }), E.value = t, h.value = !0, d.emit(\"mounted\", {\n          video: O.value,\n          player: T.value,\n          state: R.value\n        });\n      }), l(function () {\n        E.value && (E.value.dispose(), E.value = null, B.value = null, d.emit(\"unmounted\"));\n      }), function () {\n        var e, n;\n        return s(\"div\", {\n          \"data-vjs-player\": \"\",\n          class: c(v)\n        }, [s(\"video\", {\n          class: [\"video-js\", \"v-video-player\"],\n          ref: O\n        }), h.value && (null === (n = (e = d.slots).default) || void 0 === n ? void 0 : n.call(e, {\n          video: O.value,\n          player: T.value,\n          state: R.value\n        }))]);\n      };\n    }\n  }),\n  R = B,\n  z = function (e) {\n    e.component(\"VideoPlayer\", B), e.component(B.name, B);\n  },\n  w = {\n    VideoPlayer: B,\n    install: z\n  };\nexport { R as VideoPlayer, w as default, z as install };","map":{"version":3,"mappings":"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","names":["const","videoProps","src","type","String","onChange","player","width","Number","onEvent","cb","on","height","preload","loop","Boolean","muted","poster","controls","autoplay","crossorigin","value","crossOrigin","playsinline","playsInline","videoJsProps","id","sources","Array","tracks","newTracks","oldTracks","remoteTextTracks","index","length","removeRemoteTextTrack","ready","forEach","track","addRemoteTextTrack","textTrackSettings","Object","options","language","languages","playbackRates","newRates","audioOnlyMode","audioPosterMode","responsive","breakpoints","fluid","fill","aspectRatio","ratio","fullscreen","liveui","liveTracker","disablePictureInPicture","notSupportedMessage","normalizeAutoplay","noUITitleAttributes","preferFullWindow","suppressNotSupportedError","techCanOverridePoster","reportTouchActivity","techOrder","inactivityTimeout","userActions","plugins","restoreEl","videoJsComponentProps","children","controlBar","videoJsTechProps","html5","componentProps","volume","playbackRate","rate","defaultPlaybackRate","callback","propsConfig","propKeys","keys","eventsMap","assign","loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange","posterchange","languagechange","fullscreenchange","playbackrateschange","controlsdisabled","controlsenabled","enterFullWindow","exitFullWindow","enterpictureinpicture","leavepictureinpicture","sourceset","texttrackchange","textdata","useractive","userinactive","usingcustomcontrols","usingnativecontrols","dispose","beforepluginsetup","pluginsetup","componentresize","playerresize","tap","events","values","standardizeClass","className","trimmed","trim","replace","_a","split","StateConfig","getter","currentSrc","currentSource","currentWidth","currentHeight","videoWidth","videoHeight","paused","currentTime","duration","isFullscreen","isInPictureInPicture","isLive","userActive","readyState","networkState","buffered","bufferedPercent","played","seekable","audioTracks","videoTracks","textTracks","twoWayPropKeys","filter","key","getPropUpdateEventName","normalizedEvents","concat","map","normalizedProps","reduce","result","prop","types","isArray","newProp","includes","default","obj","Component","defineComponent","name","props","class","emits","setup","context","toRaw","initClassName","rawProps","__rest","mounted","shallowRef","videoElement","playerResult","videoJsPlayer","computed","state","ref","readOnlyState","readonly","onMounted","playerRes","element","fallbackOptions","optProps","propOptions","undefined","_b","initOptions","videoJsOptions","videoJs","eventKey","this","payload","isFinite","setTimeout","addClass","updateOptions","updateClassNames","oldClassName","newClassName","removeClass","createPlayer","emit","newValue","watch","ocn","normalizeClass","ncn","immediate","newOptions","deep","updatePropOption","updateState","onUpdate","timeWhenWaiting","timeUpdateListener","off","target","onInit","createPlayerState","initState","video","onBeforeUnmount","h","slots","VideoPlayer","install","app","component"],"sources":["../../../player/props.ts","../../../player/events.ts","../../../player/player.ts","../../../player/state.ts","../src/helper.ts","../src/component.ts","../src/index.ts"],"sourcesContent":["import videojs from 'video.js'\nimport type { VideoJsPlayerOptions } from 'video.js'\nimport type { VideoJsPlayer } from './type'\n\ntype PropType<T = any> = { (): T }\ntype InferPropType<T> = T extends PropType<infer V> ? V : T\n\nconst prop = <T>(options: {\n  type: PropType<T>\n  default?: any\n  onChange?: (player: VideoJsPlayer, newValue: T, oldValue?: T) => any\n  onEvent?: (player: VideoJsPlayer, callback: (newValue: T) => void) => any\n}) => options\n\n// Standard <video> Element Options\n// https://videojs.com/guides/options/#standard\nconst videoProps = {\n  src: prop({\n    type: String,\n    onChange: (player, src) => player.src(src)\n  }),\n  width: prop({\n    type: Number,\n    onChange: (player, width) => player.width(width),\n    onEvent: (player, cb) => {\n      player.on(['playerresize', 'resize'], () => cb(player.width()))\n    }\n  }),\n  height: prop({\n    type: Number,\n    onChange: (player, height) => player.height(height),\n    onEvent: (player, cb) => {\n      player.on(['playerresize', 'resize'], () => cb(player.height()))\n    }\n  }),\n  preload: prop({\n    type: String as PropType<'auto' | 'metadata' | 'none'>,\n    // https://github.com/videojs/video.js/blob/main/src/js/player.js#L3696\n    onChange: (player, preload) => player.preload(preload as any)\n  }),\n  loop: prop({\n    type: Boolean,\n    onChange: (player, loop) => player.loop(loop)\n  }),\n  muted: prop({\n    type: Boolean,\n    onChange: (player, muted) => player.muted(muted),\n    onEvent: (player, cb) => player.on('volumechange', () => cb(player.muted()))\n  }),\n  poster: prop({\n    type: String,\n    onChange: (player, poster) => player.poster(poster),\n    onEvent: (player, cb) => player.on('posterchange', () => cb(player.poster()))\n  }),\n  controls: prop({\n    type: Boolean,\n    onChange: (player, controls) => player.controls(controls),\n    onEvent: (player, cb) => {\n      player.on('controlsenabled', () => cb(true))\n      player.on('controlsdisabled', () => cb(false))\n    }\n  }),\n  // https://videojs.com/guides/options/#autoplay\n  autoplay: prop({\n    type: [Boolean, String] as unknown as PropType<boolean | 'muted' | 'play' | 'any'>,\n    onChange: (player, autoplay) => player.autoplay(autoplay)\n  }),\n  // https://github.com/videojs/video.js/blob/main/src/js/player.js#L793\n  // Support both crossOrigin and crossorigin to reduce confusion and issues around the name.\n  crossorigin: prop({\n    type: String,\n    onChange: (player, value) => player.crossOrigin(value as any)\n  }),\n  crossOrigin: prop({\n    type: String,\n    onChange: (player, value) => player.crossOrigin(value as any)\n  }),\n  playsinline: prop({\n    type: Boolean,\n    onChange: (player, value) => player.playsinline(value)\n  }),\n  playsInline: prop({\n    type: Boolean,\n    onChange: (player, value) => player.playsinline(value)\n  })\n}\n\n// Video.js specific Options\n// https://videojs.com/guides/options/#videojs-specific-options\nconst videoJsProps = {\n  id: prop({ type: String }),\n  sources: prop({\n    type: Array as PropType<NonNullable<VideoJsPlayerOptions['sources']>>,\n    onChange: (player, sources) => player.src(sources)\n  }),\n  tracks: prop({\n    type: Array as PropType<NonNullable<VideoJsPlayerOptions['tracks']>>,\n    onChange: (player, newTracks) => {\n      // https://github.com/videojs/videojs-playlist/blob/main/src/play-item.js\n      const oldTracks = player.remoteTextTracks()\n      // This uses a `while` loop rather than `forEach` because the `TextTrackList` object is a live DOM list (not an array).\n      let index = oldTracks?.length || 0\n      while (index--) {\n        player.removeRemoteTextTrack(oldTracks[index] as any as HTMLTrackElement)\n      }\n      // Add new text tracks.\n      player.ready(() => {\n        newTracks.forEach((track) => player.addRemoteTextTrack(track, false))\n      })\n    }\n  }),\n  textTrackSettings: prop({\n    type: Object as PropType<NonNullable<VideoJsPlayerOptions['textTrackSettings']>>,\n    onChange: (player, value) => (player as any).textTrackSettings.options(value)\n  }),\n  language: prop({\n    type: String,\n    onChange: (player, language) => player.language(language),\n    onEvent: (player, cb) => player.on('languagechange', () => cb(player.language()))\n  }),\n  // https://videojs.com/guides/options/#languages\n  // https://videojs.com/guides/languages/\n  // https://docs.videojs.com/module-videojs-videojs.html#.addLanguage\n  languages: prop({\n    type: Object as PropType<NonNullable<VideoJsPlayerOptions['languages']>>\n  }),\n  playbackRates: prop({\n    type: Array as PropType<NonNullable<VideoJsPlayerOptions['playbackRates']>>,\n    onChange: (player, newRates) => player.playbackRates(newRates ?? []),\n    onEvent: (player, cb) => {\n      player.on('playbackrateschange', () => cb(player.playbackRates()))\n    }\n  }),\n  audioOnlyMode: prop({\n    type: Boolean,\n    onChange: (player, value) => player.audioOnlyMode(value)\n  }),\n  audioPosterMode: prop({\n    type: Boolean,\n    onChange: (player, value) => player.audioPosterMode(value)\n  }),\n  responsive: prop({\n    type: Boolean,\n    onChange: (player, value) => player.responsive(value)\n  }),\n  breakpoints: prop({\n    type: Object as PropType<Partial<videojs.Breakpoint>>,\n    onChange: (player, value) => player.breakpoints(value)\n  }),\n  fluid: prop({\n    type: Boolean,\n    onChange: (player, value) => player.fluid(value)\n  }),\n  // https://docs.videojs.com/player#fill\n  fill: prop({\n    type: Boolean,\n    onChange: (player, value) => player.fill(value)\n  }),\n  aspectRatio: prop({\n    type: String,\n    onChange: (player, ratio) => player.aspectRatio(ratio)\n  }),\n  // https://videojs.com/guides/options/#fullscreen\n  fullscreen: prop({\n    type: Object as PropType<NonNullable<VideoJsPlayerOptions['fullscreen']>>\n  }),\n  // https://videojs.com/guides/options/#liveui\n  liveui: prop({ type: Boolean }),\n  // https://videojs.com/guides/options/#livetrackertrackingthreshold\n  liveTracker: prop({\n    type: Object as PropType<\n      Partial<{\n        trackingThreshold: number\n        liveTolerance: number\n        [key: string]: any\n      }>\n    >\n  }),\n  disablePictureInPicture: prop({\n    type: Boolean,\n    onChange: (player, value) => player.disablePictureInPicture(value)\n  }),\n  notSupportedMessage: prop({ type: String }),\n  normalizeAutoplay: prop({ type: Boolean }),\n  noUITitleAttributes: prop({ type: Boolean }),\n  preferFullWindow: prop({ type: Boolean }),\n  suppressNotSupportedError: prop({ type: Boolean }),\n  techCanOverridePoster: prop({ type: Boolean }),\n  reportTouchActivity: prop({ type: Boolean }),\n  techOrder: prop({ type: Array as PropType<Array<string>> }),\n  // https://videojs.com/guides/options/#inactivitytimeout\n  inactivityTimeout: prop({ type: Number }),\n  userActions: prop({\n    type: Object as PropType<NonNullable<VideoJsPlayerOptions['userActions']>>\n  }),\n  // https://videojs.com/guides/options/#plugins\n  // https://videojs.com/guides/plugins/\n  plugins: prop({\n    type: Object as PropType<NonNullable<VideoJsPlayerOptions['plugins']>>\n  }),\n  restoreEl: prop({ type: [Boolean, Object] as unknown as PropType<boolean | Element> }),\n  'vtt.js': prop({ type: String })\n}\n\n// Video.js component Options\n// https://videojs.com/guides/options/#component-options\nconst videoJsComponentProps = {\n  children: prop({\n    type: [Array, Object] as unknown as PropType<NonNullable<VideoJsPlayerOptions['children']>>\n  }),\n  // https://videojs.com/guides/options/#controlbarremainingtimedisplaydisplaynegative\n  controlBar: prop({\n    type: Object as PropType<NonNullable<VideoJsPlayerOptions['controlBar']>>,\n    onChange: (player, value) => player.controlBar.options(value)\n  })\n}\n\n// Video.js tech Options\n// https://videojs.com/guides/options/#tech-options\nconst videoJsTechProps = {\n  html5: prop({\n    type: Object as PropType<\n      Partial<{\n        vhs: any\n        nativeControlsForTouch: boolean\n        nativeAudioTracks: boolean\n        nativeTextTracks: boolean\n        nativeVideoTracks: boolean\n        preloadTextTracks: boolean\n      }>\n    >\n  })\n}\n\n// Framework component Options\nconst componentProps = {\n  volume: prop({\n    type: Number,\n    onChange: (player, volume) => player.volume(volume),\n    onEvent: (player, cb) => player.on('volumechange', () => cb(player.volume()))\n  }),\n  playbackRate: prop({\n    type: Number,\n    onChange(player, rate) {\n      // When playbackRate changes, sync the value to defaultPlaybackRate to\n      // ensure that the last saved playbackRate is automatically read when the video changes source.\n      player.playbackRate(rate)\n      player.defaultPlaybackRate(rate)\n    },\n    onEvent(player, callback) {\n      player.on('ratechange', () => {\n        callback(player.playbackRate())\n      })\n    }\n  }),\n  // Fallback for video.js options\n  options: prop({\n    type: Object as PropType<VideoJsPlayerOptions>\n  })\n}\n\nexport const propsConfig = {\n  ...videoProps,\n  ...videoJsProps,\n  ...videoJsComponentProps,\n  ...videoJsTechProps,\n  ...componentProps\n} as const\n\nexport type PropsConfig = typeof propsConfig\nexport type PropKey = keyof PropsConfig\nexport type Props = {\n  [K in PropKey]?: InferPropType<typeof propsConfig[K]['type']>\n}\n\nexport const propKeys = Object.keys(propsConfig) as Array<PropKey>\n","// https://www.w3.org/2010/05/video/mediaevents.html\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#events\n// https://github.com/videojs/video.js/blob/main/src/js/tech/html5.js#L1204\nconst html5EventsMap = {\n  loadstart: 'onLoadStart',\n  suspend: 'onSuspend',\n  abort: 'onAbort',\n  error: 'onError',\n  emptied: 'onEmptied',\n  stalled: 'onStalled',\n  loadedmetadata: 'onLoadedMetadata',\n  loadeddata: 'onLoadedData',\n  canplay: 'onCanPlay',\n  canplaythrough: 'onCanPlayThrough',\n  playing: 'onPlaying',\n  waiting: 'onWaiting',\n  seeking: 'onSeeking',\n  seeked: 'onSeeked',\n  ended: 'onEnded',\n  durationchange: 'onDurationChange',\n  timeupdate: 'onTimeUpdate',\n  progress: 'onProgress',\n  play: 'onPlay',\n  pause: 'onpause',\n  ratechange: 'onRateChange',\n  resize: 'onResize',\n  volumechange: 'onVolumeChange'\n} as const\n\n// https://docs.videojs.com/player#event\nconst videoJsEventsMap = {\n  posterchange: 'onPosterChange',\n  languagechange: 'onLanguageChange',\n  fullscreenchange: 'onFullscreenChange',\n  playbackrateschange: 'onPlaybackRatesChange',\n  controlsdisabled: 'onControlsDisabled',\n  controlsenabled: 'onControlsEnabled',\n  enterFullWindow: 'onEnterFullWindow',\n  exitFullWindow: 'onExitFullWindow',\n  enterpictureinpicture: 'onEnterPictureInPicture',\n  leavepictureinpicture: 'onLeavePictureInPicture',\n  // https://docs.videojs.com/player#event:sourceset\n  sourceset: 'onSourceSet',\n  texttrackchange: 'onTextTrackChange',\n  textdata: 'onTextData',\n  useractive: 'onUserActive',\n  userinactive: 'onUserInactive',\n  usingcustomcontrols: 'onUsingCustomControls',\n  usingnativecontrols: 'onUsingNativeControls',\n  dispose: 'onDispose'\n} as const\n\nconst videoJsPluginEventsMap = {\n  beforepluginsetup: 'onBeforePluginSetup',\n  pluginsetup: 'onPluginSetup'\n  // pluginsetup:$name\n} as const\n\nconst videoJsComponentEventsMap = {\n  componentresize: 'onComponentResize',\n  playerresize: 'onPlayerResize',\n  ready: 'onReady',\n  tap: 'onTap'\n} as const\n\nexport const eventsMap = {\n  ...html5EventsMap,\n  ...videoJsEventsMap,\n  ...videoJsPluginEventsMap,\n  ...videoJsComponentEventsMap\n} as const\n\nexport type EventMap = typeof eventsMap\nexport type EventKey = keyof EventMap\nexport const events = Object.keys(eventsMap) as Array<EventKey>\n\nexport const camelCaseEvents = Object.values(eventsMap)\nexport type CamelCaseEventKey = typeof camelCaseEvents[number]\n","import videoJs, { VideoJsPlayerOptions } from 'video.js'\nimport { propsConfig, Props, PropKey } from './props'\nimport { events, EventKey } from './events'\nimport type { VideoJsPlayer } from './type'\n\n/**\n * Transform `string` className to `array`.\n * @link https://github.com/videojs/video.js/pull/7798\n * @link https://github.com/videojs/video.js/issues/7685\n * @description ```\n *  input: \" test-a    test-b   test-c  \"\n *  output: [\"test-a\", \"test-b\", \"test-c\"]\n * ```\n */\nconst standardizeClass = (className: string | void) => {\n  const trimmed = className?.trim().replace(/\\s+/g, ' ')\n  return trimmed ? trimmed.split(' ') ?? [] : []\n}\n\nexport interface CreatePlayerOptions {\n  props: Props\n  element: HTMLElement\n  className?: string\n  onEvent(eventName: EventKey, payload: Event): void\n}\n\nexport type PlayerResult = ReturnType<typeof createPlayer>\nexport const createPlayer = ({ props, element, className, onEvent }: CreatePlayerOptions) => {\n  // Exclude fallback options.\n  const { options: fallbackOptions = {}, ...optProps } = props\n\n  // Exclude undefined value.\n  const propOptions: Omit<Props, 'options'> = {}\n  const optPropKeys = Object.keys(optProps) as Array<keyof typeof optProps>\n  optPropKeys.forEach((key) => {\n    const value = optProps[key]\n    if (value !== undefined) {\n      // @ts-ignore\n      propOptions[key] = value\n    }\n  })\n\n  // Merge fallback options & exclude component options.\n  const { volume, playbackRate, ...initOptions } = {\n    ...propOptions,\n    ...fallbackOptions\n  }\n\n  // Merge some confusing prop names.\n  const videoJsOptions = {\n    ...initOptions,\n    // https://videojs.com/guides/options/#restoreel\n    // Since the dispose > restore element side effect of Video.js occurs after the component has been unmounted,\n    // a DOM retention error will occur if true, so it cannot be set to true.\n    // restoreEl: initOptions.restoreEl ?? false,\n    // Video.js only supports the `playsinline` property.\n    playsinline: initOptions.playsinline ?? initOptions.playsInline\n  }\n\n  // https://videojs.com/guides/embeds/\n  // https://videojs.com/guides/react/\n  // MARK: Player div ingest\n  // There are three ways to initialize a player, the \"Player div ingest\" type is the most suitable in a component scenario\n  // because it generates the least amount of DOM side effects,\n  // and this way it can fully utilize the existing div outer container and video elements without changing the DOM structure.\n  // The problem is that the Video.js player, when instantiated, reads the className property of the video element as the className of the outer container,\n  // but the component needs to satisfy the user's need to \"be able to use the className to specify the style from the moment the component is rendered\".\n  // So we need to assume that only the className specified by the user through the component is needed for style control,\n  // while the basic \"video-js\" - like className is another internal className with a specific side effect and used only for initializing the player.\n  // So we need to distinguish the className into innerClassName, which is controlled internally by the component and remains unchanged,\n  // and userClassName, which will be applied to the container element at times like init and change.\n  // The reason why userClassName cannot be used directly as className for video elements is that it may cause unintended style side effects,\n  // such as misalignment or recursive styles, due to the different DOM hierarchy.\n  // MARK: RawHTML\n  // A better solution may exist to create the player with a freshly created video element while maintaining a mounted identifier,\n  // and when the player is instantiated, return the instantiated DOM entirely through the component,\n  // but this relies on the framework supporting a RawHTML - like API - https://github.com/ reactjs/rfcs/pull/129\n  // Custom controls capabilities can be implemented through the Video.js Component - https://videojs.com/guides/react/\n  const player = videoJs(element, videoJsOptions, function () {\n    // Stringing video.js events to vue emits.\n    events.forEach((eventKey) => {\n      this.on(eventKey, (payload) => {\n        onEvent(eventKey, payload)\n      })\n    })\n\n    // init src\n    if (initOptions.src && !initOptions.sources) {\n      this.src(initOptions.src)\n    }\n\n    // init volume\n    if (volume && Number.isFinite(volume)) {\n      this.volume(volume)\n    }\n\n    // init playbackRate\n    // https://github.com/videojs/video.js/issues/5128\n    // https://github.com/videojs/video.js/issues/2516\n    // https://github.com/videojs/videojs-playlist/issues/158\n    // https://github.com/sampotts/plyr/blob/master/src/js/plyr.js#L677\n    // https://github.com/bytedance/xgplayer/blob/master/packages/xgplayer/src/skin/controls/playbackRate.js#L30\n    if (playbackRate && Number.isFinite(playbackRate)) {\n      // Video always reads defaultPlaybackRate as the initial playbackRate when switching video sources.\n      this.defaultPlaybackRate(playbackRate)\n      // Ensures that all synchronization code has been executed by the time playbackRate is executed.\n      setTimeout(() => {\n        this.playbackRate(playbackRate)\n      }, 0)\n    }\n  }) as VideoJsPlayer\n\n  // The component needs to be initialized with the initial className of the container element to\n  // avoid flickering of the style caused by applying the className after the player has been instantiated.\n  // There are two separate times when initClassName is consumed.\n  // 1. when the component is first rendered, before the player is instantiated,\n  // the className should act on the root container of the component's original element,\n  // which allows the user to control the style before the component is mounted.\n  // 2. Before the component is mounted, `addClass(initClassName)` should be applied to the player immediately after the player is created,\n  // as Video.js does not support such an option for className, so we have to do this,\n  // and currently the synchronization feature of the browser ensures that the user\n  // does not perceive the \"init(component) > remove(createPlayer) > add(player.addClass)\" replacement process for className.\n  if (className) {\n    standardizeClass(className).map((name) => player.addClass(name))\n  }\n\n  // Set new class names to Video.js container element.\n  const updateClassNames = (oldClassName: string | void, newClassName: string | void) => {\n    standardizeClass(oldClassName).map((name) => player.removeClass(name))\n    standardizeClass(newClassName).map((name) => player.addClass(name))\n  }\n\n  // Set new options to Video.js config.\n  const updateOptions = (options: VideoJsPlayerOptions) => {\n    player.options?.(options ?? {})\n  }\n\n  // Set new prop value to Video.js config.\n  const updatePropOption = <K extends PropKey>(key: K, value: Props[K]) => {\n    updateOptions({ [key]: value })\n    propsConfig[key]?.onChange?.(player, value as never)\n  }\n\n  const disposePlayer = () => player.dispose()\n\n  return {\n    player,\n    dispose: disposePlayer,\n    updateClassNames,\n    updateOptions,\n    updatePropOption\n  }\n}\n","import type { VideoJsPlayer as Player } from './type'\n\n// https://videojs.com/advanced/\n// https://github.com/videojs/videojs.com/blob/main/src/components/HomeComponents/AdvancedExample/mediaProperties.js\n// https://github.com/videojs/videojs.com/blob/main/src/components/HomeComponents/AdvancedExample/MediaPropertyItem.jsx\nconst StateConfig = {\n  // autoplay: { getter: (player: P) => player.autoplay() }, // \n  // loop: { getter: (player: P) => player.loop() }, // \n  // preload: { getter: (player: P) => player.preload() }, // \n  // playsInline: { getter: (player: P) => player.playsinline() }, // \n  // crossOrigin: { getter: (player: P) => player.crossOrigin() }, // \n  src: {\n    getter: (player: Player) => player.src()\n  },\n  currentSrc: {\n    getter: (player: Player) => player.currentSrc()\n  },\n  currentSource: {\n    getter: (player: Player) => player.currentSource()\n  },\n  width: {\n    events: ['resize', 'playerresize'],\n    getter: (player: Player) => player.width()\n  },\n  height: {\n    events: ['resize', 'playerresize'],\n    getter: (player: Player) => player.height()\n  },\n  currentWidth: {\n    events: ['resize', 'playerresize'],\n    getter: (player: Player) => player.currentWidth()\n  },\n  currentHeight: {\n    events: ['resize', 'playerresize'],\n    getter: (player: Player) => player.currentHeight()\n  },\n  videoWidth: {\n    events: ['resize', 'playerresize'],\n    getter: (player: Player) => player.videoWidth()\n  },\n  videoHeight: {\n    events: ['resize', 'playerresize'],\n    getter: (player: Player) => player.videoHeight()\n  },\n  controls: {\n    events: ['controlsdisabled', 'controlsenabled'],\n    getter: (player: Player) => player.controls()\n  },\n  volume: {\n    events: ['volumechange'],\n    getter: (player: Player) => player.volume()\n  },\n  muted: {\n    events: ['volumechange'],\n    getter: (player: Player) => player.muted()\n  },\n  poster: {\n    events: ['posterchange'],\n    getter: (player: Player) => player.poster()\n  },\n  seeking: {\n    events: ['seeking'],\n    getter: (player: Player) => player.seeking()\n  },\n  paused: {\n    events: ['pause', 'play', 'playing'],\n    getter: (player: Player) => player.paused()\n  },\n  ended: {\n    events: ['ended', 'play'],\n    getter: (player: Player) => player.ended()\n  },\n  currentTime: {\n    events: ['timeupdate'],\n    getter: (player: Player) => player.currentTime()\n  },\n  duration: {\n    events: ['durationchange'],\n    getter: (player: Player) => player.duration()\n  },\n  playbackRate: {\n    events: ['ratechange'],\n    getter: (player: Player) => player.playbackRate()\n  },\n  playbackRates: {\n    events: ['playbackrateschange'],\n    getter: (player: Player) => player.playbackRates()\n  },\n  isFullscreen: {\n    events: ['fullscreenchange'],\n    getter: (player: Player) => player.isFullscreen()\n  },\n  isInPictureInPicture: {\n    events: ['enterpictureinpicture', 'leavepictureinpicture'],\n    getter: (player: Player) => player.isInPictureInPicture()\n  },\n  isLive: {\n    getter: (player: Player) => player.liveTracker?.isLive()\n  },\n  language: {\n    events: ['languagechange'],\n    getter: (player: Player) => player.language()\n  },\n  userActive: {\n    events: ['useractive', 'userinactive'],\n    getter: (player: Player) => player.userActive()\n  },\n  readyState: {\n    events: ['loadeddata'],\n    getter: (player: Player) => player.readyState()\n  },\n  networkState: {\n    events: ['loadeddata', 'error'],\n    getter: (player: Player) => player.networkState()\n  },\n  error: {\n    events: ['loadeddata', 'error'],\n    getter: (player: Player) => player.error()\n  },\n  buffered: {\n    events: ['progress'],\n    getter: (player: Player) => player.buffered()\n  },\n  bufferedPercent: {\n    events: ['progress'],\n    getter: (player: Player) => player.bufferedPercent()\n  },\n  played: {\n    events: ['timeupdate'],\n    getter: (player: Player) => player.played()\n  },\n  seekable: {\n    events: ['progress', 'seeked'],\n    getter: (player: Player) => player.seekable()\n  },\n  audioTracks: {\n    getter: (player: Player) => player.audioTracks?.()\n  },\n  videoTracks: {\n    getter: (player: any) => player.videoTracks?.()\n  },\n  textTracks: {\n    getter: (player: Player) => player.textTracks?.()\n  }\n}\n\ntype PlayerBastState = {\n  [K in keyof typeof StateConfig]: ReturnType<typeof StateConfig[K]['getter']>\n}\nexport interface PlayerState extends PlayerBastState {\n  playing: boolean\n  waiting: boolean\n}\n\nexport interface CreatePlayerStateOptions {\n  onInit: (state: PlayerState) => void\n  onUpdate: <K extends keyof PlayerState>(key: K, value: PlayerState[K], state: PlayerState) => void\n}\n\nexport const createPlayerState = (player: Player, options: CreatePlayerStateOptions) => {\n  const keys = Object.keys(StateConfig) as Array<keyof typeof StateConfig>\n  const state = keys.reduce(\n    (result, key) => ({ ...result, [key]: StateConfig[key].getter(player) }),\n    { playing: false, waiting: false } as PlayerState\n  )\n\n  // update state\n  const updateState = (key: keyof PlayerState, value: any) => {\n    state[key] = value as never\n    options.onUpdate(key, value, { ...state })\n  }\n\n  // playing state https://github.com/videojs/video.js/issues/181\n  // un-loop: play > playing > pause > ended\n  // loop: play > playing > [ended > restart] waiting > playing\n  player.on(['pause', 'ended'], () => {\n    updateState('playing', false)\n  })\n  player.on(['play', 'playing'], () => {\n    updateState('playing', true)\n  })\n\n  // https://github.com/videojs/video.js/blob/75ea699273d659593d95429d185865fb6e49cb93/src/js/player.js#L1743\n  player.on('waiting', () => {\n    updateState('waiting', true)\n    const timeWhenWaiting = player.currentTime()\n    const timeUpdateListener = () => {\n      if (timeWhenWaiting !== player.currentTime()) {\n        updateState('waiting', false)\n        player.off('timeupdate', timeUpdateListener)\n      }\n    }\n    player.on('timeupdate', timeUpdateListener)\n  })\n\n  keys.forEach((key) => {\n    const target = StateConfig[key]\n    const baseEvents = ['loadstart', 'loadedmetadata']\n    player.on(baseEvents.concat((target as any).events ?? []), () => {\n      updateState(key, target.getter(player))\n    })\n  })\n\n  // init state\n  options.onInit({ ...state })\n}\n","import type { PropsConfig, PropKey, EventKey, VideoJsPlayer } from '../../../player'\nimport { propsConfig, propKeys, events } from '../../../player'\n\nconst twoWayPropKeys = propKeys.filter((key) => Boolean(propsConfig[key].onEvent))\nconst getPropUpdateEventName = (key: PropKey) => `update:${key}`\n\n// Convert all supported Video.js configuration changes to two-way binding events.\nexport const bindPropUpdateEvent = (options: {\n  player: VideoJsPlayer\n  onEvent: (key: EventKey, value: any) => void\n}) => {\n  twoWayPropKeys.forEach((key) => {\n    propsConfig[key]?.onEvent?.(options.player, (newValue: unknown) => {\n      options.onEvent(getPropUpdateEventName(key) as EventKey, newValue)\n    })\n  })\n}\n\n// Add two-way binding events to all props that have onEvent.\n// The event type information is missing here, but it is necessary.\nexport const normalizedEvents = [\n  ...events,\n  ...twoWayPropKeys.map(getPropUpdateEventName)\n] as typeof events\n\n// Set the default value of all Boolean type's props to undefined.\n// https://vuejs.org/guide/components/props.html#boolean-casting\nexport const normalizedProps = propKeys.reduce((result, key) => {\n  const prop = propsConfig[key]\n  const types = Array.isArray(prop.type) ? prop.type : [prop.type]\n  const newProp = { ...prop }\n  if (types.includes(Boolean)) {\n    newProp.default = void 0\n  }\n\n  return { ...result, [key]: newProp }\n}, {} as PropsConfig)\n","import { defineComponent, onMounted, onBeforeUnmount, h, normalizeClass } from 'vue'\nimport { shallowRef, ref, computed, readonly, watch, toRaw, DeepReadonly, PropType } from 'vue'\nimport { createPlayer, createPlayerState, propKeys } from '../../../player'\nimport { PlayerState, PlayerResult } from '../../../player'\nimport { normalizedProps, normalizedEvents, bindPropUpdateEvent } from './helper'\n\nconst MOUNTED_EVENT_NAME = 'mounted'\nconst UNMOUNTED_EVENT_NAME = 'unmounted'\n\nexport default defineComponent({\n  name: 'VueVideoPlayer',\n  props: { ...normalizedProps, class: [String, Object, Array] as PropType<unknown> },\n  emits: [...normalizedEvents, MOUNTED_EVENT_NAME, UNMOUNTED_EVENT_NAME],\n  // https://github.com/vuejs/rfcs/pull/192\n  // https://github.com/vuejs/core/pull/2693\n  // slots: Object as () => { player: VideoJsPlayer; state: DeepReadonly<PlayerState> },\n  setup(props, context) {\n    const { class: initClassName, ...rawProps } = toRaw(props)\n    const mounted = shallowRef(false)\n    const videoElement = shallowRef<HTMLVideoElement | null>(null)\n    const playerResult = shallowRef<PlayerResult | null>(null)\n    const videoJsPlayer = computed(() => {\n      return playerResult.value ? playerResult.value.player : null\n    })\n\n    const state = ref<PlayerState | null>(null)\n    const readOnlyState = computed<DeepReadonly<PlayerState> | null>(() => {\n      return state.value ? readonly(state.value) : null\n    })\n\n    onMounted(() => {\n      // Create player.\n      const playerRes = createPlayer({\n        element: videoElement.value!,\n        props: rawProps,\n        onEvent: context.emit\n      })\n\n      // Sync Video.js config change to update:prop event.\n      bindPropUpdateEvent({\n        player: playerRes.player,\n        onEvent: context.emit\n      })\n\n      // Sync Vue class name to Video.js container.\n      watch(\n        () => props.class,\n        (newClassName, oldClassName) => {\n          const ocn = normalizeClass(oldClassName)\n          const ncn = normalizeClass(newClassName)\n          playerRes.updateClassNames(ocn, ncn)\n        },\n        { immediate: true }\n      )\n\n      // Sync fallback options to Video.js config.\n      watch(\n        () => props.options,\n        (newOptions) => playerRes.updateOptions(newOptions ?? {}),\n        { deep: true }\n      )\n\n      // Sync component props to Video.js config.\n      propKeys\n        .filter((key) => key !== 'options')\n        .forEach((key) => {\n          watch(\n            () => props[key],\n            (newValue) => playerRes.updatePropOption(key, newValue),\n            { deep: true }\n          )\n        })\n\n      // Create player state.\n      createPlayerState(playerRes.player, {\n        onInit(initState) {\n          state.value = initState\n        },\n        onUpdate(key, value) {\n          if (state.value) {\n            state.value[key] = value\n          }\n        }\n      })\n\n      // Emit mounted event.\n      playerResult.value = playerRes\n      mounted.value = true\n      context.emit(MOUNTED_EVENT_NAME, {\n        video: videoElement.value,\n        player: videoJsPlayer.value,\n        state: readOnlyState.value\n      })\n    })\n\n    onBeforeUnmount(() => {\n      if (playerResult.value) {\n        playerResult.value.dispose()\n        playerResult.value = null\n        state.value = null\n        context.emit(UNMOUNTED_EVENT_NAME)\n      }\n    })\n\n    return () => {\n      return h('div', { 'data-vjs-player': '', class: normalizeClass(initClassName) }, [\n        h('video', {\n          class: ['video-js', 'v-video-player'],\n          ref: videoElement\n        }),\n        mounted.value &&\n          context.slots.default?.({\n            video: videoElement.value!,\n            player: videoJsPlayer.value!,\n            state: readOnlyState.value!\n          })\n      ])\n    }\n  }\n})\n","import type { Plugin } from 'vue'\nimport Component from './component'\n\nexport type {\n  Props as VideoPlayerProps,\n  EventKey as VideoPlayerEvents,\n  PlayerState as VideoPlayerState\n} from '../../../player'\n\nexport const VideoPlayer = Component\nexport const install: Plugin = (app) => {\n  app.component('VideoPlayer', Component)\n  app.component(Component.name, Component)\n}\n\nexport default {\n  VideoPlayer: Component,\n  install\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}